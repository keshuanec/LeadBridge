{% extends "base.html" %}

{% block title %}Detail doporučitele{% endblock %}

{% block content %}
<div class="card">
    <h2>Detail doporučitele</h2>

    <p><strong>Jméno:</strong> {{ profile.user.get_full_name }}</p>

    <p><strong>E-mail:</strong> {{ profile.user.email|default:"—" }}</p>

    <p><strong>Telefon:</strong> {{ profile.user.phone|default:"—" }}</p>

    {% if user == profile.user %}
    <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid #ddd; display: flex; gap: 12px;">
        <a href="{% url 'edit_profile' %}" class="btn btn-primary">Upravit údaje</a>
        <a href="{% url 'change_password' %}" class="btn btn-secondary">Změnit heslo</a>
    </div>
    {% endif %}

    <hr>

    <p><strong>Manažer:</strong>
        {% if profile.manager %}
            {{ profile.manager.get_full_name }}
        {% else %}
            —
        {% endif %}
    </p>

    <p><strong>Poradci:</strong>
        {% for advisor in profile.advisors.all %}
            {{ advisor.get_full_name }}{% if not forloop.last %}, {% endif %}
        {% empty %}
            —
        {% endfor %}
    </p>

    <hr>

    <h3>Statistiky</h3>
    <table>
        <tbody>
            <tr>
                <th>Předané leady</th>
                <td>{{ stats.leads_sent }}</td>
            </tr>
            <tr>
                <th>Domluvené schůzky</th>
                <td>{{ stats.meetings_planned }}</td>
            </tr>
            <tr>
                <th>Realizované schůzky</th>
                <td>{{ stats.meetings_done }}</td>
            </tr>
            <tr>
                <th>Dokončené obchody</th>
                <td>{{ stats.deals_done }}</td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 24px;">
        <a href="{% url 'referrers_list' %}" class="btn btn-secondary">← Zpět na seznam doporučitelů</a>
    </div>
</div>
{% endblock %}
